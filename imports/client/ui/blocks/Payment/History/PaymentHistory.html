<template name="PaymentHistory">
  <div class="cw--PaymentHistory">
    <table
      class="
        cw--PaymentHistory__table
        cw--PaymentHistory__head
      "
    >
      <tr class="cw--PaymentHistory__tableHead">
        <th
          class="
            cw--PaymentHistory__tableTime
            cw--PaymentHistory__th
          "
        >
          Дата
        </th>
        <th
          class="
            cw--PaymentHistory__tableProfit
            cw--PaymentHistory__th
          "
        >
          {{#if isIncome.get}}
            Получено
          {{else}}
            Потрачено ГГК
          {{/if}}
        </th>
        <th
          class="
            cw--PaymentHistory__tableDescription
            cw--PaymentHistory__th
          "
        >
          Описание
        </th>
      </tr>
    </table>
    <div class="cw--PaymentHistory__data">
      <table class="cw--PaymentHistory__table">
        {{#each item in history.get}}
          <tr
            class="
              cw--PaymentHistory__row
              {{#if even @index}}
                cw--PaymentHistory__row_even
              {{else}}
                cw--PaymentHistory__row_odd
              {{/if}}
            "
          >
            <td class="cw--PaymentHistory__tableTime">
              {{item.date}}
            </td>
            <td class="cw--PaymentHistory__tableProfit">
              {{#if item.credits}}
                <span class="cw--color_honor">
                  -{{formatNumber item.credits}} ГГК
                </span>
              {{/if}}
              {{{formatProfit item.profit}}}
            </td>
            <td class="cw--PaymentHistory__tableDescription">
              {{item.goal}}
              {{#if item.goalTimes}}
                ({{item.goalTimes}})
              {{/if}}
            </td>
          </tr>
        {{/each}}
      </table>
    </div>

    <div class="cw--PaymentHistory__footer">
      {{#if isIncome.get}}
        <button onClick={{switchType 'spend'}}>Расходы</button>
      {{else}}
        <button onClick={{switchType 'income'}}>Приходы</button>
      {{/if}}
      {{> Paging args
        currentPage = currentPage
        pagesTotal = pagesTotal
        className = 'cw--PaymentHistory__paging'
      }}
    </div>

    {{#if isLoading.get}}
      {{> loading}}
    {{/if}}
  </div>
</template>