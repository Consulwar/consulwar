<template name="Research">
  <div class="cw--Research">
    <div class="cw--Research__header">
      <div class="cw--Research__headerLevel">
        {{#if research.getCurrentLevel}}
          <span class="cw--Research__levelCount">
            {{research.getCurrentLevel}}
          </span>
          уровень 
        {{else}}
          Не построено
        {{/if}}
      </div>
      <div class="cw--Research__headerTitle">
        {{research.title}}
      </div>
      <!-- quest link here -->
      <div class="cw--Research__headerControls">
        <span
          onClick={{toggleDescription}}
          class="
            cw--Research__headerIcon
            cw--button_description
            {{#if options.hideDescription}}cw--button_notActive{{/if}}
          "
        ></span>
        <a href="{{backToGroupLink}}" class="
          cw--Research__headerIcon
          cw--button_close
          "
        ></a>
      </div>
    </div>
    <div class="
        cw--Research__info
        {{#if options.hideDescription}}cw--Research__info_hidden{{/if}}
      "
    >
      <div class="cw--Research__infoWrap">
        <div class="cw--Research__mainPic">
          <img class="cw--Research__mainPicImage" src="{{research.icon}}" />
        </div>
        <div class="cw--Research__description scrollbar-inner">
          {{research.description}}
        </div>
      </div>
    </div>
    <div class="cw--Research__mainField">
      <div class="cw--Research__panel">
        <div class="cw--Research__effects">
          <div class="cw--Research__effectsHead">
            Бонусные эффекты:
          </div>
          {{> Effect item=research nextLevel=level.get}}
        </div>
        <div class="cw--Research__price">
          <div class="cw--Research__priceHead">
            Стоимость{{#if research.getCurrentLevel}} улучшения{{/if}}:
          </div>
          {{#if gt research.maxLevel research.getCurrentLevel}}
              {{> ResourcePrice price=(research.getPrice level.get)}}
          {{else}}
            BOOOOOSST
          {{/if}}
        </div>
        <div class="cw--Research__actions">
          {{#if gt research.maxLevel research.getCurrentLevel}}
            <div class="cw--Research__action">
              {{#if research.getQueue}}
                <div class="cw--Research__actionStatus">
                  Идет исследование
                </div>
              {{else}}
                <div class="cw--Research__actionAmount">
                  <button 
                    class="
                      cw--button
                      cw--button_max
                      cw--Research__actionSetMax
                    "
                    data-tooltip="Ввести максимум"
                    data-tooltip-direction="s"
                    {{premiumTitle}}
                    onClick={{setMaximum}}
                  ></button>
                  {{> InputNumber args
                    value=level
                    min=(sum research.getCurrentLevel 1)
                    max=research.maxLevel
                    isShowZero=false
                    placeholder="Уровень"
                    class="cw--Research__actionAmountCount"
                  }}
                </div>
              {{/if}}
              {{#if research.getQueue}}
                <button class="
                    cw--button
                    cw--button_type_primary
                    cw--button_type_primary_green
                  "
                  onClick={{showSpeedUp}}
                >
                  Ускорить
                </button>
              {{else}}
                <button class="
                    cw--button
                    cw--button_type_primary
                    cw--button_type_primary_orange
                  "
                  onClick={{Build}}
                  disabled="{{not (research.canBuild level.get)}}"
                >
                  {{#if research.getCurrentLevel}}
                    Улучшить
                  {{else}}
                    Исследовать
                  {{/if}}
                </button>
              {{/if}}

            </div>
          {{/if}}
        </div>
      </div>
      {{> Requirements
        requirements=getRequirements
        class="cw--Research__require"
      }}
    </div>
  </div>
</template>