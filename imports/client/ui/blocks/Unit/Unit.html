<template name="Unit">
  <div class="cw--Unit">
    <div class="cw--Unit__header">
      <div class="cw--Unit__headerLevel">
        {{#if unit.getCount}}
          <span class="cw--Unit__levelCount">
            {{formatNumber unit.getCount}}
          </span>
          {{declension unit.getCount 'единиц' 'а' 'ы' ''}}
        {{else}}
          На планете отсутствуют
        {{/if}}

        {{#if gt unit.getTotalCount unit.getCount}}
          (всего 
          <span class="cw--Unit__levelCount">
            {{formatNumber unit.getTotalCount}}
          </span>
          {{declension unit.getTotalCount 'единиц' 'а' 'ы' ''}}
          )
        {{/if}}
      </div>
      <div class="cw--Unit__headerTitle">
        {{unit.title}}
      </div>
      <div class="cw--Unit__headerControls">
        <span
          onClick={{toggleDescription}}
          class="
            cw--Unit__headerIcon
            cw--Unit__buttonDescription
            cw--button
            {{#if options.hideDescription}}cw--button_notActive{{/if}}
          "
        ></span>
        <a
          href={{backToGroupLink}}
          class="
            cw--Unit__headerIcon
            cw--button_close
          "
        ></a>
      </div>
    </div>
    <div
      class="
        cw--Unit__info
        {{#if options.hideDescription}}cw--Unit__info_hidden{{/if}}
      "
    >
      <div class="cw--Unit__infoWrap">
        <div class="cw--Unit__mainPic">
          <img
            class="cw--Unit__mainPicImage"
            src={{unit.icon}}
            alt={{unit.title}}
          />
        </div>
        <div class="cw--Unit__description scrollbar-inner">
          {{unit.description}}
        </div>
      </div>
    </div>
    <div class="cw--Unit__mainField">
      <div class="cw--Unit__panel">
        {{> UnitCharacteristics args unit=unit}}

        {{#unless eq unit.type 'reptileUnit'}}
          <div class="cw--Unit__price">
            <div class="cw--Unit__priceHead">
              Стоимость:
            </div>
            {{> ResourcePrice args price=(unit.getPrice count.get)}}
          </div>
          <div class="cw--Unit__actions">

            <div class="cw--Unit__action">
              {{#if unit.getQueue}}
                <div class="cw--Unit__actionStatus">
                  Идёт строительство
                </div>
                <button
                  class="
                    cw--button
                    cw--button_type_primary
                    cw--button_type_primary_green
                  "
                  onClick={{showSpeedUp}}
                  disabled={{lt timeLeft.get 5}}
                >
                  {{#if lt timeLeft.get 5}}
                    {{formatSeconds timeLeft.get}}
                  {{else}}
                    Ускорить 
                  {{/if}}
                </button>
              {{else}}
                <div class="cw--Unit__actionAmount">
                  <button 
                    class="
                      cw--button
                      cw--Unit__actionSetMax
                    "
                    data-tooltip="Ввести максимум"
                    data-tooltip-direction="s"
                    onClick={{setMaximum}}
                  ></button>
                  {{> InputNumber args
                    value=count
                    max=unit.maxCount
                    placeholder="Количество"
                    class="cw--Unit__actionAmountCount"
                  }}
                </div>
                <button
                  class="
                    cw--button
                    cw--button_type_primary
                    cw--button_type_primary_orange
                  "
                  onClick={{build}}
                  disabled={{not unit.canBuild}}
                >
                  Построить
                </button>
              {{/if}}
            </div>

            {{#unless eq unit.group 'Ground'}}
              <div class="cw--Unit__action">
                {{#if unit.maxCount}}
                  <div class="cw--Unit__actionCount">
                    Всего юнитов {{formatNumber unit.getTotalCount}}
                    из {{formatNumber unit.maxCount}}
                  </div>
                {{/if}}
                <button
                  class="
                    cw--button
                    cw--button_type_primary
                    cw--button_type_primary_blue
                  "
                  onClick={{repair}}
                >
                  Ремонтировать
                </button>
              </div>
            {{/unless}}
          </div>
        {{/unless}}
      </div>
      {{> Requirements args
        requirements=unit.getRequirements
        className="cw--Unit__require"
      }}
    </div>
  </div>
</template>