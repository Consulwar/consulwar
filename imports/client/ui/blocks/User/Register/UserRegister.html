<template name="UserRegister">
  <div class="cw--UserRegister">
    {{> PersonImage
      person=Tamily
      showChangeOption=false
      class="cw--UserRegister__person"
    }}
    <div class="cw--UserRegister__content">
      <div class="cw--UserRegister__intro">
        Рада вас видеть, Консул, желаете ввести свои параметры для подключения 
        к каналу связи или же вы уже имеете Аккаунт Связи со вселенной 42?
      </div>
      <form
        onSubmit={{register}}
        class="cw--UserRegister__formSection"
      >
        <div class="cw--UserRegister__formTitle">
          Регистрация
        </div>

        <div class="cw--UserRegister__form">
          <div class="cw--UserRegister__inputs">
            <div class="cw--UserRegister__inputsGroup">
              {{> InputString args
                name="username"
                value=username
                errors=errors
                validators=usernameValidators
                className="cw--UserRegister__input"
                placeholder="Введите Никнейм"
                required=true
              }}
              {{> InputEmail args
                name="email"
                value=email
                errors=errors
                validators=emailValidators
                className="cw--UserRegister__input"
                placeholder="Введите Емейл"
                required=true
              }}
            </div>
            <div class="cw--UserRegister__inputsGroup">
              {{> InputPassword args
                name="password"
                value=password
                errors=errors
                validators=passwordValidators
                className="cw--UserRegister__input"
                placeholder="Введите Пароль"
                required=true
              }}
              {{> InputPassword args
                name="password_repeat"
                value=passwordRepeat
                errors=errors
                validators=passwordRepeatValidators
                className="cw--UserRegister__input"
                placeholder="Повторите Пароль"
                required=true
              }}
            </div>
          </div>
        </div>
        
        <div class="cw--UserRegister__rules">
          <label class="cw--UserRegister__rulesLabel">
            <input
              class="cw--UserRegister__rulesInput"
              type="checkbox"
              required="required"
              name="rules"
            />
            С
            <a
              href="/legal/agreement"
              class="cw--UserRegister__rulesLink"
              onClick={{showLicense}}
              data-sound="hover,click"
            >
              правилами
            </a>
            ознакомлен и согласен
          </label>
        </div>
        <div class="cw--UserRegister__code">
          {{#if isInviteRequired}}
            {{> InputString args
              name="code"
              value=code
              errors=errors
              required=true
              placeholder="Код приглашения"
            }}
          {{else}}
            {{> reCAPTCHA}}
          {{/if}}
        </div>

        {{#if getErrors}}
          <div class="cw--UserRegister__errors">
            {{#each error in getErrors}}
              {{error}}<br/>
            {{/each}}
          </div>
        {{/if}}

        <button
          class="
            cw--UserLogin__submit
            cw--button
            cw--button_type_primary
            cw--button_type_primary_green
          "
          data-sound="hover,click"
        >
          Войти в игру
        </button>
      </form>
      <div class="cw--UserRegister__switch">
        <div class="cw--UserRegister__switchHead">
          У вас уже есть аккаунт? Желаете войти в него?
        </div>
        <button
          class="
            cw--button
            cw--button_flat
            cw--UserRegister__switchButton
          "
          data-sound="hover,click"
          onClick={{showLoginPopup}}
        >
          Уже есть аккаунт
        </button>
      </div>
    </div>
  </div>
</template>