<template name="item_requirements">
	{{#if requirements}}
	<div class="requirements">
		<span class="title">Необходимые технологии:</span>
		{{#each requirements}}
		<a class="{{this.[0].engName}}-icon {{#if this.[0].has this.[1]}}has{{/if}}" href="{{this.[0].url}}">
			{{#if gt this.[1] 1}}{{this.[1]}} уровень{{/if}}
			<div class="{{this.[0].type}}">{{this.[0].name}}</div>
		</a>
		{{/each}}
	</div>
	{{/if}}
</template>

<template name="item_effect">
	{{#if item.effect}}
		{{#with item.effect}}
			<div class="currentLevel">
				Текущий уровень: {{level}} {{#if eq item.maxLevel level}}(Максимальный){{/if}}<br/>
				{{name}}{{pretext}}{{result}}{{aftertext}} {{unit}}
			</div>

				{{#with next}}
				<div class="nextLevel">
					Следующий уровень: {{level}} {{#if eq item.maxLevel level}}(Максимальный){{/if}}<br/>
					{{name}}{{pretext}}{{result}}{{aftertext}} {{unit}}
				</div>
				{{/with}}
		{{/with}}
	{{/if}}
</template>

<template name="item_characteristic">
	{{#if item.characteristics}}
		<div class="characteristics">
			{{#if item.targets}}
				Приоритеты атаки:
				<ol class="targets">
					{{#each item.targets}}
						<li><a href="{{this.url}}">{{this.name}}</a></li>
					{{/each}}
				</ol>
			{{/if}}
			{{item.characteristics.effect.name}}

			{{#if eq item.characteristics.special 'air'}}
				*Воздушная единица<br/>
			{{/if}}

			{{#each item.characteristics.notAttack}}
			{{#if eq this 'air'}}
				*Не атакует воздушные цели
			{{/if}}
			{{/each}}
			
			{{#if item.characteristics.damage}}
				<span class="damage" {{militaryTooltip item.characteristics.effects 'damage'}}>
						{{formatNumberWithISO item.characteristics.damage.min}} —
						{{formatNumberWithISO item.characteristics.damage.max}}
				</span>
			{{/if}} 
			<span class="life" {{militaryTooltip item.characteristics.effects 'life'}}>
				{{formatNumberWithISO item.characteristics.life}}
			</span>
		</div>
	{{/if}}
</template>

<template name="item_price">
	<ul class="resources">
		{{#with price}}
			<li class="time" {{priceTooltip . 'time'}}>
				Время строительства: 
				<time>{{formatSeconds time}}</time>
			</li>
			{{#if humans}}<li class="humans" {{priceTooltip . 'humans'}}>{{formatNumberWithISO humans}}</li>{{/if}}
			{{#if honor}}<li class="honor" {{priceTooltip . 'honor'}}>{{formatNumberWithISO honor}}</li>{{/if}}
			{{#if metals}}<li class="metals" {{priceTooltip . 'metals'}}>{{formatNumberWithISO metals}}</li>{{/if}}
			{{#if crystals}}<li class="crystals" {{priceTooltip . 'crystals'}}>{{formatNumberWithISO crystals}}</li>{{/if}}
			{{#if credits}}<li class="credits" {{priceTooltip . 'credits'}}>{{formatNumberWithISO credits}}</li>{{/if}}
		{{/with}}
	</ul>
</template>