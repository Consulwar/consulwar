<template name="settings">
	<div class="settings">
		{{> changePassword}}

		{{> emailSettings}}

		{{> notificationsSettings}}
		
		<div class="vacationMode">
			<h2>Режим отпуска</h2>
			<div class="checkBlock">
				<input type="checkbox" name="vacationMode" disabled>
				<span class="checkboxTitle">активирован</span>
				<span class="notImplemented">В разработке!</span>
			</div>
		</div>
	</div>
</template>

<template name="changePassword">
	<form class="changePassword">
		<h2>Смена пароля</h2>
		<label>
			<div class="title">Старый пароль:</div>
			<input name="oldPassword" type="password" placeholder="Ваш старый пароль">
		</label>
		<label>
			<div class="title">Новый пароль:</div>
			<input name="newPassword" type="password" placeholder="Ваш новый пароль">
		</label>
		<label>
			<div class="title">Повторите пароль:</div>
			<input name="newPasswordRepeat" type="password" placeholder="Повторите пароль">
		</label>

		<button name="change">Изменить пароль</button>
	</form>
</template>

<template name="emailSettings">
	<div class="emailSettings">
		<h2>Настройка email</h2>
		<div class="emailBlock">
			{{#if user.emails.[0].verified}}
				<span class="check" data-tooltip="email подтвержден"></span>
				<span class="email">{{user.emails.[0].address}}</span>
			{{else}}
				<span class="cross" data-tooltip="email не подтвержден"></span>
				<span class="email">{{user.emails.[0].address}}</span>
				<button name="changeEmail" data-tooltip="изменить email"></button>
				<button 
					name="verify" 
					data-tooltip="Отправить письмо потверждения"
					data-email="{{user.emails.[0].address}}"
				>
				</button>
			{{/if}}
		</div>
		<div class="lettersFrequency">
			<span class="title">Частота писем:</span>
			{{#each Game.Settings.emailLettersFrequency}}
				<button 
					data-frequency="{{engName}}"
					data-email="{{user.emails.[0].address}}"
					class="{{#if (eq engName (or user.emails.[0].lettersFrequency 'everyDay'))}}active{{/if}}"
				>
					{{title}}
				</button>
			{{/each}}
		</div>
		<div class="checkBlock">
			<input 
				type="checkbox"
				name="subscribed"
				checked="{{not user.emails.[0].unsubscribed}}"
				data-email="{{user.emails.[0].address}}"
			>
			<span class="checkboxTitle"> Подписан на рассылку</span>
		</div>
	</div>
</template>

<template name="notificationsSettings">
	<div class="notificationsSettings">
		<h2>Настройка уведомлений</h2>
		<div class="checkBlock">
			<input type="checkbox">
			<span class="checkboxTitle">Показывать уведомления на рабочем столе</span>
		</div>
		<div class="checkBlock">
			<input type="checkbox">
			<span class="checkboxTitle">Не отображать Задания / Квэсты во время их активации</span>
		</div>
	</div>
</template>