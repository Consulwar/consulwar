<template name="unit">
	<div class="information {{unit.type}}">
		<div class="image">
			<img 
				alt="{{unit.name}}" 
				src="
				{{#unless unit.notImplemented}}
					/img/game/unit/{{unit.side}}/{{unit.group}}/{{unit.engName}}.jpg
				{{else}}
					/img/game/notimplemented.jpg
				{{/unless}}
				"
			>
			<span class="title">{{unit.name}}</span>
			{{#if unit.currentLevel}}
				<span class="level" title="{{formatNumber unit.currentLevel}}">
					{{formatNumberWithISO unit.currentLevel}} 
					{{declension unit.currentLevel 'юнит' '' 'а' 'ов'}}
				</span>
			{{/if}}
		</div>
		<div class="description">
			{{> item_requirements requirements=unit.requirements}}

			<p>{{unit.description}}</p>
			
			{{> unitBattleEffects unit=unit}}

			{{#if unit.maxCount}}
				<div class="limit">
					Всего юнитов {{formatNumber unit.totalCount}} из {{formatNumber unit.maxCount}}
				</div>
			{{/if}}
		</div>

		{{> item_characteristic item=unit}}
		
		{{#unless eq unit.side 'reptiles'}}
			{{> item_price price=(unit.price count)}}

			<input class="count" type="number" placeholder="Количество" value="1"/>

			<button class="build" disabled="{{not (unit.canBuild count)}}">Отдать приказ</button>
		{{/unless}}
		
		{{> Template.dynamic template=additionalArea}}
	</div>
</template>

<template name="unitBattleEffects">
	{{#if unit.battleEffects}}
		<div class="currentLevel">
			{{#each unit.battleEffects}}
				{{#if result}}
					{{name}}{{pretext}}{{formatNumber result}}{{aftertext}} 
					{{#if notImplemented}}<span class="notImplemented">В разработке!</span>{{/if}}
					<br/>
				{{/if}}
			{{/each}}
		</div>
	{{/if}}
</template>